# Phase 6: Control Operations - Context

**Gathered:** 2026-02-22
**Status:** Ready for planning

<domain>
## Phase Boundary

在 Web 仪表盘内控制运行时操作：加载模块、卸载模块、启动/停止心跳循环，并在模块操作失败时向用户展示错误信息。仅讨论该控制能力本身，不扩展到模块市场、多实例编排等新能力。

</domain>

<decisions>
## Implementation Decisions

### 模块加载交互
- 采用「列表内逐项加载」：在模块列表中对目标模块直接点击加载。
- 加载成功后，立即更新该行状态并给出成功提示。
- 加载进行中使用按钮级加载态（按钮禁用并显示进行中状态）。
- 并发策略为「先串行后扩展」：当前版本一次只处理一个加载操作，后续可再扩展并行。

### 模块卸载与错误展示
- 卸载入口使用每项内联按钮（在模块项内直接可操作）。
- 加载/卸载采用互斥按钮关系：按当前状态显示对应动作。
- 模块操作失败通过 Toast 展示错误。
- 错误信息以简短描述为主，不展示完整技术细节。
- 卸载后从「已启用模块」列表移除（回到未启用集合）。

### 心跳控制方式
- 使用单按钮切换模式（根据状态显示“启动心跳/停止心跳”）。
- 点击后按钮进入加载态并暂时禁用，完成后恢复。
- 若“停止心跳”失败，保持当前运行状态与按钮语义一致（不提前切换为“启动心跳”）。

### Claude's Discretion
- 心跳控制按钮的具体页面位置（仅 Heartbeat 页面，或同时在总览区域提供）由 Claude 按现有页面结构决定。
- 心跳控制按钮的最终文案与视觉细节由 Claude 结合现有 UI 风格确定。

</decisions>

<specifics>
## Specific Ideas

- 用户希望操作路径是“看到模块 → 手动点击按钮加载到当前运行时”，强调显式控制而非自动加载。
- 用户偏好通过“已启用模块 / 所有模块”视角来理解加载与卸载状态转换。

</specifics>

<deferred>
## Deferred Ideas

- 在线模块市场下载并接入仪表盘加载流程（模块市场集成能力）。
- “组装实例 / 当前实例”导向的多实例模块切换与装配能力。

</deferred>

---

*Phase: 06-control-operations*
*Context gathered: 2026-02-22*
